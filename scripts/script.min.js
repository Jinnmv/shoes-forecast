$(document).ready(function(){var b={unit:"c",image:false,highlow:false,wind:false,link:false,showerror:true};var c="Dnipropetrovs'k";var a=918981;if($.cookies.test()){if($.cookies.get("city")){c=$.cookies.get("city")}if($.cookies.get("woeid")){a=$.cookies.get("woeid")}}$("#city").val(c);$("#temp").weatherfeed([a],b);$("#city").focus(function(){$this=$(this);$this.select();$this.mouseup(function(){$this.unbind("mouseup");return false})});$("#city").autocomplete({source:function(g,e){now=new Date();var h="select * from geo.places where text='"+g.term+"*' and placeTypeName='Town'";var f="http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(h)+"&rnd="+now.getFullYear()+now.getMonth()+now.getDay()+now.getHours()+"&format=json&callback=?";$.getJSON(f,function(i){if(i.query){if(i.query.results&&i.query.count>1){e($.map(i.query.results.place,function(j){return{label:j.name+" ("+j.admin1.content+"), "+j.country.content,value:j.name,id:j.woeid}}))}if(i.query.count==1){e($.map([i.query.results.place],function(j){return{label:j.name+" ("+j.admin1.content+"), "+j.country.content,value:j.name,id:j.woeid}}))}}})},minLength:3,select:function(f,g){$("#temp").weatherfeed(g.item.id,b);if($.cookies.test()){var e=new Date();e.setMonth(e.getMonth()+3);$.cookies.set("woeid",g.item.id,{expiresAt:e});$.cookies.set("city",g.item.value,{expiresAt:e})}$(this).removeClass("ui-autocomplete-loading")},open:function(){$(this).removeClass("ui-corner-all").addClass("ui-corner-top")},close:function(){$(this).removeClass("ui-corner-top").addClass("ui-corner-all")}})});function highlight_shoes(a){var c=[["thongs",30,35],["flip-flops",25,35],["sandals",20,30],["closed-sandals",18,25],["sabots",17,25],["court-shoes",12,20],["botilony",10,15],["ankle-boots",3,12],["demi-boots",-3,3],["winter-boots",-10,-3],["high-felt-boots",-20,-10]];$("#shoes-list dt").removeClass("optimal-shoes");for(var b=c.length-1;b>=0;b--){if(a>=c[b][1]&&a<c[b][2]){if(!$("#"+c[b][0]).hasClass("optimal-shoes")){$("#"+c[b][0]).addClass("optimal-shoes")}$("#bar").height((c.length-b)*38)}}}(function(c){c.fn.weatherfeed=function(g,e){var f={unit:"c",image:true,highlow:true,wind:true,link:true,showerror:true};var e=c.extend(f,e);return this.each(function(j,m){var h=c(m);if(!h.hasClass("weatherFeed")){h.addClass("weatherFeed")}now=new Date();var l="select * from weather.forecast where woeid ="+g+" and u='"+e.unit+"'";var k="http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(l)+"&rnd="+now.getFullYear()+now.getMonth()+now.getDay()+now.getHours()+"&format=json&callback=?";c.getJSON(k,function(p){if(p.query){if(p.query.results.length>0){var n=p.query.results.channel.length;for(var o=0;o<n;o++){a(m,p.query.results.channel[o],e)}}else{a(m,p.query.results.channel,e)}}else{if(e.showerror){h.html("<p>Weather information unavailable</p>")}}window.setTimeout(function(){h.weatherfeed(g,e)},300000)})})};var a=function(i,h,g){var f=c(i);f.find(".temp-value").html(h.item.condition.temp+"&deg;"+g.unit.toUpperCase());highlight_shoes(h.item.condition.temp);Tinycon.setOptions({width:7,height:9,font:"10px Arial",colour:"#ffffff",background:"#1790C4",fallback:true});Tinycon.setBubble(h.item.condition.temp)};var b=function(e){d=new Date();r=new Date(d.toDateString()+" "+e);return r}})(jQuery);